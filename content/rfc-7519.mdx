---
title: "JSON Web Token (RFC 7519)"
date: "2015-05-01"
---

# JWT (JSON Web Token)

[RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519)는 당사자 간에 정보를 **JSON 객체**로 안전하게 전송하기 위한 컴팩트한 방법을 정의합니다.
현대 웹/앱 개발에서 **로그인 인증(Authentication)**의 핵심 기술로 자리 잡았습니다.

---

## 1. Session vs Token

### 기존 방식 (Server Session)
1.  사용자가 로그인하면 서버 메모리에 '철수 로그인함'이라고 적어둡니다. (세션 ID 발급)
2.  사용자가 올 때마다 서버 메모리를 뒤져봐야 합니다.
3.  **문제점**: 서버가 여러 대(Scale-out)가 되면, 메모리 공유가 힘들어집니다. (Redis 등이 필요)

### JWT 방식 (Stateless)
1.  사용자가 로그인하면 '철수 로그인함'이라는 정보를 **암호화해서 티켓(Token)**으로 만들어 사용자에게 줍니다.
2.  사용자는 요청할 때마다 이 티켓을 보여줍니다.
3.  **장점**: 서버는 토큰이 위조되었는지만 검사하면 됩니다. 별도 저장소가 필요 없습니다.

---

## 2. JWT 구조 (Structure)

JWT는 점(`.`)으로 구분된 3덩어리의 문자열입니다. `aaaaa.bbbbb.ccccc`

1.  **Header**: 토큰 타입(JWT)과 해싱 알고리즘(`HS256` 등) 정보.
2.  **Payload**: 실제 데이터(Claim). 사용자 ID, 만료 시간(`exp`) 등을 담습니다.
    *   *주의: 여기 담긴 정보는 암호화되지 않고 Base64 인코딩만 된 상태라 누구나 볼 수 있습니다. 비밀번호 같은 건 절대 넣으면 안 됩니다!*
3.  **Signature**: Header와 Payload를 서버의 **비밀 키(Secret Key)**로 서명한 값. 위변조를 막는 핵심입니다.

---

## 3. Access Token & Refresh Token

보안을 위해 보통 두 가지 토큰을 같이 씁니다.

*   **Access Token**: 수명이 짧음 (예: 30분). 실제 API 요청에 사용. 탈취당해도 금방 만료됨.
*   **Refresh Token**: 수명이 김 (예: 2주). Access Token이 만료되면 새로 발급받을 때 사용. 안전하게 보관해야 함.
